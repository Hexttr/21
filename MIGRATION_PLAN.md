# –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Supabase –Ω–∞ PostgreSQL

## ‚úÖ –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:

1. **Backend API** - Node.js/Express —Å–µ—Ä–≤–µ—Ä
2. **–î–æ—Å—Ç—É–ø –∫ PostgreSQL** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î** - –∑–Ω–∞–µ–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
4. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. Backend (—É–∂–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å auth routes –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î
- ‚è≥ –°–æ–∑–¥–∞—Ç—å SECURITY DEFINER —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ routes (users, lessons, ai)
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

### 2. –§—Ä–æ–Ω—Ç–µ–Ω–¥
- ‚è≥ –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç –≤–º–µ—Å—Ç–æ Supabase –∫–ª–∏–µ–Ω—Ç–∞
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å AuthContext –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ Supabase
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å Edge Functions –≤—ã–∑–æ–≤—ã –Ω–∞ API endpoints

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚è≥ –°–æ–∑–¥–∞—Ç—å SECURITY DEFINER —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã (invitation_codes, lessons)
- ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (–∏–∑–≤–µ—Å—Ç–Ω–∞—è):

### –¢–∞–±–ª–∏—Ü—ã:
- `profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ (user_id, name, email, blocked)
- `user_roles` - —Ä–æ–ª–∏ (user_id, role: admin/student)
- `lesson_content` - –∫–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–æ–≤ (lesson_id, custom_description, video_urls, is_published)
- `practical_materials` - –º–∞—Ç–µ—Ä–∏–∞–ª—ã (title, description, video_url, is_published)
- `student_progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å (user_id, lesson_id, completed, quiz_completed)
- `auth.users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (id, email, encrypted_password)

### –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å:
- `invitation_codes` - –∫–æ–¥—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- `lessons` - –±–∞–∑–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É—Ä–æ–∫–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:

1. **–í—ã—Å–æ–∫–∏–π:** Auth (signin, signup, validate code)
2. **–í—ã—Å–æ–∫–∏–π:** User profile –∏ roles
3. **–°—Ä–µ–¥–Ω–∏–π:** Lessons –∏ progress
4. **–°—Ä–µ–¥–Ω–∏–π:** AI —Ñ—É–Ω–∫—Ü–∏–∏ (chat, quiz, image)
5. **–ù–∏–∑–∫–∏–π:** Admin —Ñ—É–Ω–∫—Ü–∏–∏

