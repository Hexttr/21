# План подключения существующей PostgreSQL базы данных

## Текущая ситуация

✅ **PostgreSQL база данных на Timeweb:**
- Host: `9558e7dd68bdade50224f6f1.twc1.net:5432`
- Database: `db_21day`
- User: `gen_user`
- Все данные уже мигрированы

✅ **Backend API:**
- Настроен на эту базу
- Работает на порту 3001
- Health endpoint отвечает

## Что нужно сделать

### 1. Решить проблему RLS (Row Level Security)
Backend не может читать данные из-за RLS политик.

**Решение:** Отключить RLS временно (как мы планировали ранее)
- Выполнить SQL через панель Timeweb
- Или через скрипт, если есть права

### 2. Продолжить миграцию компонентов на API
- ✅ AuthContext - переписан на API
- ✅ ProgressContext - переписан на API
- ⏳ AdminLessons - нужно обновить
- ⏳ AdminCodes - нужно обновить
- ⏳ AdminWaitlist - нужно обновить
- ⏳ Остальные компоненты

### 3. Настроить переменные окружения для фронтенда
Создать `.env` файл с:
- URL backend API: `https://21day.club/api` или `http://localhost:3001/api`
- (Опционально) Supabase данные, если нужны для чего-то

### 4. Пересобрать и развернуть фронтенд
После миграции всех компонентов

## Следующие шаги

1. Решить проблему RLS (отключить через панель Timeweb)
2. Протестировать backend подключение к базе
3. Продолжить миграцию компонентов
4. Развернуть обновленный фронтенд

